import{b as l}from"./app-aa7db96a.js";const C=t=>/^[A-Za-z]+$/.test(t),E=t=>/^[0-9A-Za-z+]+$/.test(t),R=t=>typeof t=="string"?!0:/^[0-9A-Za-z-_ ]+$/.test(t),w=t=>/^[0-9A-Za-z-_]+$/.test(t),D=t=>/^[0-9]+$/.test(t),j=t=>/^[0-9.]+$/.test(t),I=t=>{if(typeof t=="boolean")return!0},O=t=>/^GHA-\d{9}-\d{1}$/.test(t),F=t=>/^[A-Z]{2}-\d{1,4}-\d{4}$/.test(t),x=t=>/^[A-Z]{2}\s\d{1,4}(\s[A-Z]{1}$|\s-\s\d{2}$)/.test(t),z=t=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase()),K=t=>/^0\d{9}$/.test(t),a=(t,f)=>(f=typeof f>"u"?" ":f,t.includes("_")?t.replace("_"," "):t.replace(/([a-z\d])([A-Z])/g,"$1"+f+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+f+"$2").toLowerCase());let n={};const k=(t,f,i)=>{for(const $ in f)for(const e in t)$===e&&(n[`${e}`]=[],f[$].split("|").forEach(d=>{let r="",s="";if(d.includes(">")?(r=d.split(">")[0],s=d.split(">")[1]):r=d,r==="required"&&!t[e])s.length>0?n[`${e}`].push(s):n[`${e}`].push(`The ${i?i[e]:a(e)} field is required`);else if(t[e]){if(r==="alpha"&&!C(t[e])&&(s.length>0?n[`${e}`].push(s):n[`${e}`].push(`The ${i?i[e]:a(e)} field must be alphabetic characters`)),r==="alpha_num"&&!E(t[e])&&(s.length>0?n[`${e}`].push(s):n[`${e}`].push(`The ${i?i[e]:a(e)} field must be alphanumeric`)),r==="alpha_dash"&&!w(t[e])&&(s.length>0?n[`${e}`].push(s):n[`${e}`].push(`The ${i?i[e]:a(e)} field must be alphanumeric with dashes or underscore`)),r==="string"&&!R(t[e])&&(s.length>0?n[`${e}`].push(s):n[`${e}`].push(`The ${i?i[e]:a(e)} field must be string`)),r==="numeric"&&!D(t[e])&&(s.length>0?n[`${e}`].push(s):n[`${e}`].push(`The ${i?i[e]:a(e)} field must be numeric`)),r==="float"&&!j(t[e])&&(s.length>0?n[`${e}`].push(s):n[`${e}`].push(`The ${i?i[e]:a(e)} field must be numeric`)),r==="vehicleReg"&&!x(t[e])&&(s.length>0?n[`${e}`].push(s):n[`${e}`].push(`The ${i?i[e]:a(e)} field must be vehicle registration number`)),r==="email"&&!z(t[e])&&(s.length>0?n[`${e}`].push(s):n[`${e}`].push(`The ${i?i[e]:a(e)} field must be a valid email`)),r==="bool"&&!I(t[e])&&(s.length>0?n[`${e}`].push(s):n[`${e}`].push(`The ${i?i[e]:a(e)} field must be a boolean`)),r==="id_card"&&!O(t[e])&&(s.length>0?n[`${e}`].push(s):n[`${e}`].push("The ID field must be a valid Ghana Card")),r==="digital_address"&&!F(t[e])&&(s.length>0?n[`${e}`].push(s):n[`${e}`].push("The address field must be a valid digital address")),r==="email_phone"){const m=/^[A-Za-z]+$/,o=/^0\d{9}$/;m.test(t[e])||t[e].includes("@")?z(t[e])||(s.length>0?n[`${e}`].push(s):n[`${e}`].push(`The ${i?i[e]:a(e)} field must be a valid email`)):o.test(t[e])?o.test(t[e])||(s.length>0?n[`${e}`].push(s):n[`${e}`].push(`The ${i?i[e]:a(e)} field must be a valid phone number`)):s.length>0?n[`${e}`].push(s):n[`${e}`].push(`The ${i?i[e]:a(e)} field must be a valid phone number`)}if(r==="phone"&&!K(t[e])&&(s.length>0?n[`${e}`].push(s):n[`${e}`].push(`The ${i?i[e]:a(e)} field must be a valid phone number`)),r.includes(":")){const m=r.split(":")[0],o=r.split(":")[1];switch(m.toLowerCase()){case"min":t[e].length<parseInt(o)&&(s.length>0?n[`${e}`].push(s):n[`${e}`].push(`The ${i?i[e]:a(e)} must be ${o} characters minimum`));break;case"max":t[e].length>parseInt(o)&&(s.length>0?n[`${e}`].push(s):n[`${e}`].push(`The ${i?i[e]:a(e)} must be ${o} characters maximum`));break;case"match":t[e]!==t[o]&&(s.length>0?n[`${e}`].push(s):n[`${e}`].push(`The ${i?i[e]:a(e)} dose not match ${o}`));break}}}}));return n};function W(t,f,i=null){const[$,e]=l.useState(t),[A,d]=l.useState(f),[r,s]=l.useState(),[m,o]=l.useState({}),[T,b]=l.useState(!1),V=l.useCallback(()=>{if(T){let h=0;Object.keys($).forEach(c=>{h+=m[c].length}),h===0?i&&i():b(!1)}},[T]);return l.useEffect(()=>{V()},[T]),{handleChange:(h,c)=>{if(c){e(S=>({...S,[c]:h.htmlValue}));return}const{name:u,value:p,files:g,type:Z,checked:_}=h.target;if(Z==="file")g&&e(S=>({...S,[u]:Object.values(g)}));else if(Z==="tel"){let y=p.replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);e(y?()=>({...$,[u]:`(${y[1]}) ${y[2]} - ${y[3]}`}):{...$,[u]:p})}else e(Z==="checkbox"?{...$,[u]:_}:{...$,[u]:p})},handleBlur:h=>{const{name:c,value:u}=h.target,p=k($,{[c]:A[`${c}`]},r);o(g=>({...g,...p}))},handleKeyDown:h=>{const{name:c,value:u}=h.target,p=k($,{[c]:A[`${c}`]},r);o(g=>({...g,...p}))},handleSubmit:h=>{h.preventDefault(),o({}),b(!0),o(k($,A,r))},isSubmitting:T,updateIsSubmitting:h=>{b(h)},errors:m,state:$,rules:A,clearValues:(h=!0)=>{h&&(e(t),o({}))},setValues:(h={},c)=>{Object.keys(h).length>0?e(u=>u={...u,...h}):c==="replace"&&e(u=>({...h}))},setValidationRules:(h={},c)=>{Object.keys(h).length>0?d(u=>u={...u,...h}):c==="replace"&&d(u=>({...h}))},setFields:(h={},c)=>{Object.keys(h).length>0&&s(c==="replace"?u=>({...h}):u=>u={...u,...h})},setServerErrors:(h={},c)=>{Object.keys(h).length>0?o(u=>u={...u,...h}):c==="replace"&&o(u=>({...h}))}}}export{W as u};
